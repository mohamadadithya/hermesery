const ipForm=document.querySelector(".header__form"),ipInput=ipForm.querySelector(".header__form--input"),mapContainer=document.querySelector(".map-container"),infoValueEl={ipAddress:document.getElementById("ip-address"),location:document.getElementById("location"),timezone:document.getElementById("timezone"),isp:document.getElementById("isp")};ipForm.addEventListener("submit",a=>{a.preventDefault(),getLocation(ipInput.value)});const getLocation=async a=>{let b=a?`https://api.techniknews.net/ipgeo/${a}`:"https://api.techniknews.net/ipgeo/";const c=await fetch(b),d=await c.json(),e=await d;if(e&&"fail"!==e.status)showInfo(e),mapContainer.innerHTML="",showMap(e);else{let a=new Notyf;a.error("IP Address not eligible")}},showMap=a=>{mapContainer.innerHTML="<div class=\"map\" id=\"map\"></div>";let b=a.lat,c=a.lon,d=L.map("map",{center:[b,c],zoom:20,zoomControl:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors"}).addTo(d),L.control.zoom({position:"bottomleft"}).addTo(d);let e=new L.Icon({iconUrl:"https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-orange.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.7/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});L.marker([b,c],{icon:e}).addTo(d)},showInfo=a=>{infoValueEl.ipAddress.textContent=a.ip,infoValueEl.location.textContent=`${a.city}, ${a.countryCode}`,infoValueEl.timezone.textContent=a.timezone,infoValueEl.isp.textContent=a.isp};getLocation();